@(signupForm: Form[User])

@import helper._
@import helper.twitterBootstrap._

@title = {
    Registre-se
}

@scripts = {
  <script type="text/javascript">
    $(document).ready(function(){
      
      // Estado inicial dos campos
      $("#state").attr("disabled", "disabled");
      $("#city").attr("disabled", "disabled");

      // Eventos
      $("#country").change(function(e) {
        var country = e.target.value;
        if (country) {
          $("#state").removeAttr("disabled");
          $("#state").load(encodeURI("@routes.SignUp.listStates("")" + country));
        } else {
          $("#state").attr("disabled", "disabled");
          $("#state").attr("value", "--- Selecione o estado / província ---");
          $("#city").attr("disabled", "disabled");
          $("#city").attr("value", "--- Selecione a cidade ---");
        }
      });
      
      $("#state").change(function(e) {
        var state = e.target.value;
        if (state) {
          $("#city").removeAttr("disabled");
        } else {
          $("#city").attr("disabled", "disabled");
          $("#city").attr("value", "--- Selecione a cidade ---");
        }
        $("#city").load(encodeURI("@routes.SignUp.listCities("")" + state));
      });
      
    });

  </script>
}

@main(title, nav = "signup", scripts) {
    
    @helper.form(action = routes.SignUp.submit) {
        
        <fieldset>
            <legend>Informa√ß√µes da conta</legend>
            
            @inputText(
                signupForm("username"), 
                '_label -> "Login", 
                '_help -> "Escolha um login v√°lido.",
                '_error -> signupForm.globalError
            )
            
            @inputPassword(
                signupForm("password.main"), 
                '_label -> "Senha",
                '_help -> "A senha deve ter pelo menos 6 caracteres. "
            )
            
            @inputPassword(
                signupForm("password.confirm"), 
                '_label -> "Confirme a senha",
                '_help -> "Repita sua senha.",
                '_error -> signupForm.error("password")
            )
            
        </fieldset>
        
        <fieldset>
            
            <legend>Outras informa√ß√µes</legend>
            
            @select(
                signupForm("country"), 
                options = options(Countries.list),
                '_default -> "--- Selecione o pa√≠s ---",
                '_label -> "Pa√≠s"
            )

            @select(
              signupForm("state"), 
              options = Seq(),
              '_default -> "--- Selecione o estado / província ---",
              '_label -> "Estado / Província"
            )
            
            @select(
              signupForm("city"), 
              options = Seq(),
              '_default -> "--- Selecione a cidade ---",
              '_label -> "Cidade"
            )
            
        </fieldset>
        
        <div class="actions">
            <input type="submit" class="btn primary" value="Registrar">
            <a href="@routes.Application.index" class="btn">Cancelar</a>
        </div>
        
    }
    
}